(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{gv9p:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DisplayAgentsListComponent}));var rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("bwdy"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("8lHc"),moment__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("wgY5"),moment__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__),shared_functions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("j2Hr"),shared_models_helpers_Alert__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("LgNh"),shared_models__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("k5pS"),shared_services__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("IXvK"),sections_display_src_shared_models___WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("KUDs"),sections_display_src_shared_services___WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("lSgf");class DisplayAgentsListComponent{constructor(e,t,l,n,s){this.displayAgentsIndicatorsService=e,this.alertService=t,this.envService=l,this.modalService=n,this.userSelectionService=s,this.subscription=new rxjs__WEBPACK_IMPORTED_MODULE_0__.a,this.alertMessage=new shared_models_helpers_Alert__WEBPACK_IMPORTED_MODULE_4__.a,this.show_columns=!1,this.show=!1,this.selected=[],this.historic=!1,this.graph=!1,this.show_graph_or_table_button=!1,this.env=l,this.model=new sections_display_src_shared_models___WEBPACK_IMPORTED_MODULE_7__.a,this.local_store="assignation",this.selectorVisibleFields=new shared_models__WEBPACK_IMPORTED_MODULE_5__.b("visible"),this.selectorVisibleFields.assignation=!1,this.selectorVisibleFields.auxiliar=!1,this.currentDate=moment__WEBPACK_IMPORTED_MODULE_2__(new Date).format("YYYY-MM-DD"),this.rows=new sections_display_src_shared_models___WEBPACK_IMPORTED_MODULE_7__.b,this.rows_original=new sections_display_src_shared_models___WEBPACK_IMPORTED_MODULE_7__.b}ngOnInit(){this.userSelection=new shared_models__WEBPACK_IMPORTED_MODULE_5__.b("userSelection"),this.getReportList(this.userSelection),this.filterFieldList=this.model.fieldList(),this.numberOfRowsInTable={id:10,value:10},this.exportName="reporte-conexi\xf3n",this.initialSelectedFilterField={field_name:"start_date",name:"fecha_inicio",text:"Fecha desde"},this.onRepeat()}ngOnDestroy(){this.subscription.unsubscribe()}onRepeat(){const e=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(1e3,5e3),t=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(1e3,1e3);this.getReportList(this.userSelection),this.subscription.add(e.subscribe(()=>{Object(shared_functions__WEBPACK_IMPORTED_MODULE_3__.c)(this.userSelection.start_date)===this.currentDate&&this.getReportList(this.userSelection)})),t.subscribe(()=>{this.timerConnected=this.timerConnected+1})}getReportList(e){e&&this.displayAgentsIndicatorsService.getReportList(e).subscribe(t=>{this.timerConnected=0,this.historic=this.currentDate!==Object(shared_functions__WEBPACK_IMPORTED_MODULE_3__.c)(e.start_date),t?this.rows=t:console.error("Error",t),this.alertMessage=new shared_models_helpers_Alert__WEBPACK_IMPORTED_MODULE_4__.a},e=>{console.error("Error",e),this.show=!1,this.alertService.error(e.status),this.alertMessage.alertTitle="Error del servidor",this.alertMessage.alertText=e.statusText,this.alertMessage.alertShow=!0,this.alertMessage.alertClass="alert alert-danger alert-dismissible fade show"})}openDetailModal(e,t){this.activeModal=this.modalService.open(e,{windowClass:"my-class",keyboard:!1})}onShowHideGraphButtons(){this.graph=!this.graph,this.show_graph_or_table_button=!this.show_graph_or_table_button}onActivate(e){this.row_selection=e.row}onSelect(e){this.selected=e.selected}onReturnHeaderResult(e){this.userSelection=new shared_models__WEBPACK_IMPORTED_MODULE_5__.b("userSelection"),this.getReportList(this.userSelection),this.show_graph_or_table_button=!1}onRecalculate(e){this.userSelection=new shared_models__WEBPACK_IMPORTED_MODULE_5__.b("userSelection"),this.getReportList(this.userSelection),this.show_graph_or_table_button=!1,console.error("this.rows",this.rows)}onReturnNumberOfRowsInTable(e){console.error("event",e),this.numberOfRowsInTable=e}onReturnRowsForTable(e){this.rows=e}onObjectToArray(e){let t,l=e[0];return void 0!==l&&(t=Object.entries(l).map(([e,t])=>({key:e,value:t}))),t}onCreateModel(model){model=(new sections_display_src_shared_models___WEBPACK_IMPORTED_MODULE_7__.a).fieldList(),console.error("model",model);let obj={};model.map(e=>{obj[`${e.name}`]="x."+e.field_name});let newModel=JSON.stringify(obj),newModel2=JSON.stringify(newModel.replace(/\"/g,"").replace(/:/g,": ").replace(/,/g,",\n ")),model3=eval(newModel2);console.error("model",model3)}openModal(e){}}},"x/ce":function(e,t,l){"use strict";l.r(t);var n=l("kZht"),s=l("An66"),i=l("PJLp"),r=l.n(i);Object(s.registerLocaleData)(r.a,"es");class a{}var o=l("ET8j"),_=l("C9Ky"),d=l("iwai"),c=l("5Ofn"),u=l("Uj1/"),p=l("hlL8"),m=l("aymL"),h=l("78Vo"),g=l("w7wT"),b=l("XtjK"),M=l("gv9p"),O=l("cjRQ"),E=l("phxf"),w=n["\u0275crt"]({encapsulation:0,styles:[[".frame[_ngcontent-%COMP%]{border:1px solid #d3d3d3;border-radius:5px;min-height:50vh}.tablegraph[_ngcontent-%COMP%]{margin:0;padding:3px}.tablegraph-subtitles[_ngcontent-%COMP%]{margin:200;padding:3px 0 .5rem;background:#d3d3d3;font-size:1.2rem;font-weight:400;text-align:center}.tablegraph-table[_ngcontent-%COMP%]{display:grid;grid-template-columns:4fr 1fr;margin:0;padding:5px 5px 0}.tablegraph-table[_ngcontent-%COMP%]:hover{color:#242488;border:1px solid #5e5b5b;border-radius:5px;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.tablegraph-table[_ngcontent-%COMP%]:nth-child(even){background:#f2f2f2}.tablegraph-table[_ngcontent-%COMP%]:nth-child(odd){background:#fff}.tablegraph-table[_ngcontent-%COMP%]:first-child{background:#f2f2f2;margin-top:10px}.tablegraph-table[_ngcontent-%COMP%]:last-child{background:#fff;margin-bottom:10px}.tablegraph-text[_ngcontent-%COMP%]{font-size:1rem;padding:5px 20px 0 0;color:#495057}.tablegraph-number[_ngcontent-%COMP%]{text-align:right;font-size:1.4rem;font-weight:400;padding-top:0}.pointer[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width:1200px){.tablegraph-table[_ngcontent-%COMP%]{display:grid;grid-template-columns:4fr 1fr;margin:0;padding:5px 5px 0}}@media screen and (max-width:992px){.tablegraph-table[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 1fr;margin:0;padding:5px 5px 0}}@media screen and (max-width:768px){.tablegraph-table[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;margin:0;padding:5px 5px 0}}@media screen and (max-width:576px){.tablegraph-table[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;margin:0;padding:5px 5px 0}}.table[_ngcontent-%COMP%]{display:flex}.element[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 4fr;grid-gap:1px 5px 1px 1px}.indicadores[_ngcontent-%COMP%]{margin:10px;font-size:1rem;color:gray}.indicadores-cantidad[_ngcontent-%COMP%]{font-size:1.5rem;max-width:40%}.indicadores-descripcion[_ngcontent-%COMP%]{max-width:50%}.indicadores-porcentaje[_ngcontent-%COMP%]{max-width:10%}.indicadores-subtitles[_ngcontent-%COMP%]{margin:200;padding:3px 0 .5rem;background:#d3d3d3;font-size:1rem;font-weight:400;text-align:center}"]],data:{}});function f(e){return n["\u0275vid"](0,[(e()(),n["\u0275eld"](0,0,null,null,11,"li",[],null,null,null,null,null)),(e()(),n["\u0275eld"](1,0,null,null,2,"h1",[],null,null,null,null,null)),(e()(),n["\u0275eld"](2,0,null,null,0,"i",[["class","fas fa-user"]],null,null,null,null,null)),(e()(),n["\u0275ted"](3,null,[" \xa0",""])),(e()(),n["\u0275eld"](4,0,null,null,7,"div",[["class","element"]],null,null,null,null,null)),(e()(),n["\u0275eld"](5,0,null,null,1,"p",[["class","small"]],null,null,null,null,null)),(e()(),n["\u0275ted"](6,null,[" ","-",""])),(e()(),n["\u0275eld"](7,0,null,null,2,"p",[["class","indicadores-porcentaje"]],null,null,null,null,null)),(e()(),n["\u0275ted"](8,null,[" "," "])),n["\u0275ppd"](9,1),(e()(),n["\u0275eld"](10,0,null,null,1,"p",[["class","indicadores-descripcion text-left"]],null,null,null,null,null)),(e()(),n["\u0275ted"](11,null,[" \xa0"," "]))],null,(function(e,t){var l=t.component;e(t,3,0,t.context.$implicit.agent_name),e(t,6,0,t.context.$implicit.rca_agent_status,t.context.$implicit.rca_group_name);var s=n["\u0275unv"](t,8,0,e(t,9,0,n["\u0275nov"](t.parent,0),t.context.$implicit.value/l.rows.agentsConnectedTotal[0].agentsConnectedTotal));e(t,8,0,s),e(t,11,0,t.context.$implicit.name)}))}function C(e){return n["\u0275vid"](0,[n["\u0275pid"](0,s.PercentPipe,[n.LOCALE_ID]),(e()(),n["\u0275eld"](1,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),n["\u0275eld"](2,0,null,null,1,"app-alert",[],null,null,null,c.b,c.a)),n["\u0275did"](3,114688,null,0,u.a,[],{alertMessage:[0,"alertMessage"]},null),(e()(),n["\u0275eld"](4,0,null,null,1,"app-display-display-header",[],null,[[null,"returnResult"]],(function(e,t,l){var n=!0;return"returnResult"===t&&(n=!1!==e.component.onReturnHeaderResult(l)&&n),n}),p.b,p.a)),n["\u0275did"](5,114688,null,0,m.a,[h.a,g.w,b.a],{userSelection:[0,"userSelection"],selectorVisibleFields:[1,"selectorVisibleFields"],timerConnected:[2,"timerConnected"]},{returnResult:"returnResult"}),(e()(),n["\u0275eld"](6,0,null,null,3,"section",[],null,null,null,null,null)),(e()(),n["\u0275eld"](7,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),n["\u0275and"](16777216,null,null,1,null,f)),n["\u0275did"](9,278528,null,0,s.NgForOf,[n.ViewContainerRef,n.TemplateRef,n.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var l=t.component;e(t,3,0,l.alertMessage),e(t,5,0,l.userSelection,l.selectorVisibleFields,l.timerConnected),e(t,9,0,l.rows.agentsConnectedByGroup)}),null)}l("IXvK");var P=l("k5pS");class D{constructor(e,t,l){this.alertService=e,this.envService=t,this.userSelectionService=l,this.userSelection=new P.b("standard"),this.selectorVisibleFields=new P.b("visible"),this.title="Display agentes"}ngOnInit(){this.userSelection.title!==this.title&&this.setReportTitles()}setReportTitles(){this.userSelection.title=this.title,this.userSelectionService.writeUserSelectionHistoric(this.userSelection),this.selectorVisibleFields.assignation=!1,this.selectorVisibleFields.auxiliar=!1}}var x=n["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function v(e){return n["\u0275vid"](0,[(e()(),n["\u0275eld"](0,0,null,null,1,"app-display-display-agents-list",[],null,null,null,C,w)),n["\u0275did"](1,245760,null,0,M.a,[O.a,E.a,h.a,g.w,b.a],{userSelection:[0,"userSelection"],selectorVisibleFields:[1,"selectorVisibleFields"]},null)],(function(e,t){var l=t.component;e(t,1,0,l.userSelection,l.selectorVisibleFields)}),null)}function R(e){return n["\u0275vid"](0,[(e()(),n["\u0275eld"](0,0,null,null,1,"app-display-display-agents",[],null,null,null,v,x)),n["\u0275did"](1,114688,null,0,D,[E.a,h.a,b.a],null,null)],(function(e,t){e(t,1,0)}),null)}var L=n["\u0275ccf"]("app-display-display-agents",D,R,{},{},[]),S=l("3kIJ"),y=l("NuYi"),T=l("K9jP"),I=l("Uw3X"),A=l("ruJL"),U=l("Z4LD"),K=l("uEFD"),k=l("Xsav"),B=l("1VvW"),F=l("XhJS"),W=l("em0t"),j=l("9o7S"),N=l("HDHg"),V=l("NxuZ");class q{}l.d(t,"DisplayAgentsModuleNgFactory",(function(){return H}));var H=n["\u0275cmf"](a,[],(function(e){return n["\u0275mod"]([n["\u0275mpd"](512,n.ComponentFactoryResolver,n["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,o.b,o.h,o.i,o.e,o.f,o.g,_.a,d.b,d.a,L]],[3,n.ComponentFactoryResolver],n.NgModuleRef]),n["\u0275mpd"](4608,s.NgLocalization,s.NgLocaleLocalization,[n.LOCALE_ID,[2,s["\u0275angular_packages_common_common_a"]]]),n["\u0275mpd"](4608,S.q,S.q,[]),n["\u0275mpd"](4608,S.d,S.d,[]),n["\u0275mpd"](4608,g.w,g.w,[n.ComponentFactoryResolver,n.Injector,g.gb,g.x]),n["\u0275mpd"](4608,y.ScrollbarHelper,y.ScrollbarHelper,[s.DOCUMENT]),n["\u0275mpd"](4608,T.DimensionsHelper,T.DimensionsHelper,[]),n["\u0275mpd"](4608,I.ColumnChangesService,I.ColumnChangesService,[]),n["\u0275mpd"](1073742336,s.CommonModule,s.CommonModule,[]),n["\u0275mpd"](1073742336,A.a,A.a,[]),n["\u0275mpd"](1073742336,S.p,S.p,[]),n["\u0275mpd"](1073742336,S.g,S.g,[]),n["\u0275mpd"](1073742336,S.n,S.n,[]),n["\u0275mpd"](1073742336,g.d,g.d,[]),n["\u0275mpd"](1073742336,g.g,g.g,[]),n["\u0275mpd"](1073742336,g.h,g.h,[]),n["\u0275mpd"](1073742336,g.l,g.l,[]),n["\u0275mpd"](1073742336,g.m,g.m,[]),n["\u0275mpd"](1073742336,g.s,g.s,[]),n["\u0275mpd"](1073742336,g.t,g.t,[]),n["\u0275mpd"](1073742336,g.y,g.y,[]),n["\u0275mpd"](1073742336,g.C,g.C,[]),n["\u0275mpd"](1073742336,g.F,g.F,[]),n["\u0275mpd"](1073742336,g.I,g.I,[]),n["\u0275mpd"](1073742336,g.L,g.L,[]),n["\u0275mpd"](1073742336,g.O,g.O,[]),n["\u0275mpd"](1073742336,g.S,g.S,[]),n["\u0275mpd"](1073742336,g.T,g.T,[]),n["\u0275mpd"](1073742336,g.U,g.U,[]),n["\u0275mpd"](1073742336,g.z,g.z,[]),n["\u0275mpd"](1073742336,U.c,U.c,[]),n["\u0275mpd"](1073742336,K.NgxDatatableModule,K.NgxDatatableModule,[]),n["\u0275mpd"](1073742336,k.b,k.b,[]),n["\u0275mpd"](1073742336,B.o,B.o,[[2,B.t],[2,B.l]]),n["\u0275mpd"](1073742336,F.a,F.a,[]),n["\u0275mpd"](1073742336,W.a,W.a,[]),n["\u0275mpd"](1073742336,j.a,j.a,[]),n["\u0275mpd"](1073742336,N.a,N.a,[]),n["\u0275mpd"](1073742336,V.j,V.j,[]),n["\u0275mpd"](1073742336,q,q,[]),n["\u0275mpd"](1073742336,a,a,[]),n["\u0275mpd"](256,n.LOCALE_ID,"es",[]),n["\u0275mpd"](256,U.d,U.e,[]),n["\u0275mpd"](1024,B.j,(function(){return[[{path:"",component:D,children:[]}]]}),[])])}))}}]);